{"version":3,"file":"events.js","sourceRoot":"","sources":["../../../../src/internal/utils/events.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAAE,wBAAwB,EAAE,MAAM,UAAU,CAAC;AAEpD,MAAM,UAAU,SAAS,CAAC,KAAY;IACpC,KAAK,CAAC,cAAc,EAAE,CAAC;IACvB,KAAK,CAAC,eAAe,EAAE,CAAC;AAC1B,CAAC;AAED,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAAC,OAAoB,EAAE,WAAmB,EAAE,QAA8B,EAAE,EAAE;IAC7G,IAAI,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,EAAE;QACrC,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC;KAC7C;SAAM,IAAK,OAAe,CAAC,WAAW,CAAC,KAAK,SAAS,EAAE;QACtD,QAAQ,CAAE,OAAe,CAAC,WAAW,CAAC,CAAC,CAAC;KACzC;IAED,qGAAqG;IACrG,0IAA0I;IAC1I,gDAAgD;IAChD,IAAK,OAAe,CAAC,aAAa,IAAI,CAAC,WAAW,KAAK,SAAS,IAAI,WAAW,KAAK,OAAO,CAAC,EAAE;QAC3F,OAAe,CAAC,aAAa,GAAG,IAAI,CAAC;KACvC;IAED,MAAM,WAAW,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE,WAAW,CAAQ,CAAC;IAExG,IAAI,WAAW,EAAE;QACf,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,EAAE;YAC1C,GAAG,EAAE,WAAW,CAAC,GAAG;YACpB,GAAG,EAAE,GAAG,CAAC,EAAE;gBACT,QAAQ,CAAC,GAAG,CAAC,CAAC;gBACd,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACrC,CAAC;SACF,CAAC,CAAC;KACJ;IAED,OAAO,wBAAwB,CAAC,OAAO,EAAE,WAAW,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9E,CAAC,CAAC","sourcesContent":["/*\n * Copyright (c) 2016-2021 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\n\nimport { listenForAttributeChange } from './dom.js';\n\nexport function stopEvent(event: Event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nexport const getElementUpdates = (element: HTMLElement, propertyKey: string, callback: (value: any) => void) => {\n  if (element.hasAttribute(propertyKey)) {\n    callback(element.getAttribute(propertyKey));\n  } else if ((element as any)[propertyKey] !== undefined) {\n    callback((element as any)[propertyKey]);\n  }\n\n  // React: disable input tracker to setup property observer. React re-creates tracker on input changes\n  // https://github.com/facebook/react/blob/9198a5cec0936a21a5ba194a22fcbac03eba5d1d/packages/react-dom/src/client/inputValueTracking.js#L51\n  // https://github.com/vmware/clarity/issues/5625\n  if ((element as any)._valueTracker && (propertyKey === 'checked' || propertyKey === 'value')) {\n    (element as any)._valueTracker = null;\n  }\n\n  const updatedProp = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(element), propertyKey) as any;\n\n  if (updatedProp) {\n    Object.defineProperty(element, propertyKey, {\n      get: updatedProp.get,\n      set: val => {\n        callback(val);\n        updatedProp.set.call(element, val);\n      },\n    });\n  }\n\n  return listenForAttributeChange(element, propertyKey, val => callback(val));\n};\n"]}