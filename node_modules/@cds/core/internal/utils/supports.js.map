{"version":3,"file":"supports.js","sourceRoot":"","sources":["../../../../src/internal/utils/supports.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAAE,oBAAoB,EAAE,MAAM,aAAa,CAAC;AAOnD,MAAM,eAAe;IAMnB;QALA,aAAQ,GAAG;YACT,EAAE,EAAE,IAAI;YACR,OAAO,EAAE,eAAe,EAAE;SAC3B,CAAC;QAGA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,OAAO,EAAE;YACzG,MAAM,QAAQ,GAAG,oBAAoB,CACnC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAC/B,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,GAAG,IAAI,IAAK,IAAI,CAAC,QAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,EAAE,EAAE,EAC/E,EAAE,CACH,CACF,CAAC,IAAI,EAAE,CAAC;YACT,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;SACtD;IACH,CAAC;CACF;AAED,MAAM,CAAC,MAAM,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;AAErD,SAAS,eAAe;IACtB,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC3C,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;IAC5B,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,QAAQ,CAAC;IACpC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;IAE1B,iCAAiC;IACjC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;IAChD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;IAEhD,oDAAoD;IACpD,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAChC,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,KAAK,CAAC,CAAC,CAAC,qDAAqD;IACjG,IAAI,CAAC,UAAsB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC/C,OAAO,WAAW,CAAC;AACrB,CAAC","sourcesContent":["/*\n * Copyright (c) 2016-2021 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\n\nimport { camelCaseToKebabCase } from './string.js';\n\nexport interface FeatureSupportMatrix {\n  js?: boolean;\n  flexGap?: boolean;\n}\n\nclass BrowserFeatures {\n  supports = {\n    js: true,\n    flexGap: supportsFlexGap(),\n  };\n\n  constructor() {\n    if (!document.body.hasAttribute('cds-supports') || document.body.getAttribute('cds-supports') === 'no-js') {\n      const supports = camelCaseToKebabCase(\n        Object.keys(this.supports).reduce(\n          (prev, next) => `${prev} ${(this.supports as any)[next] ? next : `no-${next}`}`,\n          ''\n        )\n      ).trim();\n      document.body.setAttribute('cds-supports', supports);\n    }\n  }\n}\n\nexport const browserFeatures = new BrowserFeatures();\n\nfunction supportsFlexGap(): boolean {\n  const flex = document.createElement('div');\n  flex.style.display = 'flex';\n  flex.style.flexDirection = 'column';\n  flex.style.rowGap = '1px';\n\n  // create two, elements inside it\n  flex.appendChild(document.createElement('div'));\n  flex.appendChild(document.createElement('div'));\n\n  // append to the DOM (needed to obtain scrollHeight)\n  document.body.appendChild(flex);\n  const isSupported = flex.scrollHeight === 1; // flex container should be 1px high from the row-gap\n  (flex.parentNode as Element).removeChild(flex);\n  return isSupported;\n}\n"]}