{"version":3,"file":"focus-trap.base.js","sourceRoot":"","sources":["../../../../src/internal/base/focus-trap.base.ts"],"names":[],"mappings":"AAAA;;;;GAIG;;AAEH,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,aAAa,CAAC;AAC/C,OAAO,EAAE,SAAS,EAAE,MAAM,wBAAwB,CAAC;AACnD,OAAO,EAAE,gBAAgB,EAAE,QAAQ,EAAE,MAAM,2BAA2B,CAAC;AACvE,OAAO,EAAE,QAAQ,EAAE,MAAM,sBAAsB,CAAC;AAEhD,MAAM,OAAO,gBAAiB,SAAQ,UAAU;IAkB9C;QACE,KAAK,EAAE,CAAC;QAbV;;;;WAIG;QAC0B,WAAM,GAAG,KAAK,CAAC;QAGlC,aAAQ,GAAG,KAAK,CAAC;QAMzB,IAAI,CAAC,WAAW,GAAG,QAAQ,EAAE,CAAC;QAC9B,oEAAoE;QACpE,iBAAiB;QACjB,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,oBAAoB;QAClB,KAAK,CAAC,oBAAoB,EAAE,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;IACnC,CAAC;IAED,wBAAwB,CAAC,IAAY,EAAE,GAAW,EAAE,KAAa;QAC/D,KAAK,CAAC,wBAAwB,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QAEjD,IAAI,IAAI,KAAK,QAAQ,IAAI,GAAG,KAAK,KAAK,EAAE;YACtC,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;IACH,CAAC;IAES,MAAM;QACd,OAAO,IAAI,CAAA,eAAe,CAAC;IAC7B,CAAC;IAEO,eAAe;QACrB,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE;YAClD,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;SAClC;IACH,CAAC;CACF;AA5C8B;IAA5B,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;gDAAgB;AAG5C;IADC,gBAAgB,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;kDACxB;AAEC;IAA3B,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;qDAAqB","sourcesContent":["/*\n * Copyright (c) 2016-2021 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\n\nimport { html, LitElement } from 'lit-element';\nimport { FocusTrap } from '../utils/focus-trap.js';\nimport { internalProperty, property } from '../decorators/property.js';\nimport { createId } from '../utils/identity.js';\n\nexport class CdsBaseFocusTrap extends LitElement {\n  focusTrap: FocusTrap;\n\n  topReboundElement: HTMLElement;\n  bottomReboundElement: HTMLElement;\n\n  /**\n   * Its recommended to remove or add a focus trap element from the DOM\n   * some SSR systems can have technical constraints where the item can\n   * only be removed via CSS/hidden.\n   */\n  @property({ type: Boolean }) hidden = false;\n\n  @internalProperty({ type: Boolean, reflect: true })\n  protected demoMode = false;\n\n  @property({ type: String }) focusTrapId: string;\n\n  constructor() {\n    super();\n    this.focusTrapId = createId();\n    // if we see issues instantiating here, we should consider moving to\n    // firstUpdated()\n    this.focusTrap = new FocusTrap(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.toggleFocusTrap();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.focusTrap.removeFocusTrap();\n  }\n\n  attributeChangedCallback(name: string, old: string, value: string) {\n    super.attributeChangedCallback(name, old, value);\n\n    if (name === 'hidden' && old !== value) {\n      this.toggleFocusTrap();\n    }\n  }\n\n  protected render() {\n    return html`<slot></slot>`;\n  }\n\n  private toggleFocusTrap() {\n    if (!this.demoMode && !this.hasAttribute('hidden')) {\n      this.focusTrap.enableFocusTrap();\n    } else {\n      this.focusTrap.removeFocusTrap();\n    }\n  }\n}\n"]}