{"version":3,"file":"ng-stack-contenteditable.js","sources":["../../../projects/contenteditable/src/lib/contenteditable.directive.ts","../../../projects/contenteditable/src/lib/contenteditable.module.ts","../../../projects/contenteditable/src/public_api.ts","../../../projects/contenteditable/src/ng-stack-contenteditable.ts"],"names":[],"mappings":";;;;AAcA;;AACA,MAKa,wBAAwB;AAAG,IAQtC,YACU,UAAsB,EACtB,QAAmB,EACY,gBAAwB,EACrC,QAAkB;AAC7C,QAJS,eAAU,GAAV,UAAU,CAAY;AAAC,QACvB,aAAQ,GAAR,QAAQ,CAAW;AAAC,QACW,qBAAgB,GAAhB,gBAAgB,CAAQ;AAAC,QACtC,aAAQ,GAAR,QAAQ,CAAU;AAChD,QAZW,sBAAiB,GAAG,aAAa,CAAC;AAC7C,QAAgD,oBAAe,GAAG,IAAI,CAAC;AACvE,KAUM;AACN,IAEE,YAAY;AACd,QAAI,IAAI,OAAO,IAAI,CAAC,QAAQ,IAAI,UAAU,EAAE;AAC5C,YAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;AAC3E,SAAK;AACL,KAAG;AACH,IAEE,aAAa;AACf,QAAI,IAAI,OAAO,IAAI,CAAC,SAAS,IAAI,UAAU,EAAE;AAC7C,YAAM,IAAI,CAAC,SAAS,EAAE,CAAC;AACvB,SAAK;AACL,KAAG;AACH;AAEC;AACE;AACE;AAEH;AAAO;AAEJ;AAAQ,IAAX,UAAU,CAAC,KAAU;AAAI,QACvB,MAAM,eAAe,GAAG,KAAK,IAAI,IAAI,GAAG,EAAE,GAAG,KAAK,CAAC;AACvD,QAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;AACtG,KAAG;AACH;AAEC;AACE;AAEH;AAAO;AACE;AAEJ;AAAQ,IAAX,gBAAgB,CAAC,EAAc;AAAI,QACjC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACvB,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAL,iBAAiB,CAAC,EAAc;AAAI,QAClC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACxB,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAL,gBAAgB,CAAC,UAAmB;AAAI,QACtC,IAAI,UAAU,EAAE;AACpB,YAAM,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;AACpF,YAAM,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAC7C,IAAI,CAAC,UAAU,CAAC,aAAa,EAC7B,SAAS,EACT,IAAI,CAAC,qBAAqB,CAC3B,CAAC;AACR,SAAK;AAAC,aAAK;AACX,YAAM,IAAI,IAAI,CAAC,mBAAmB,EAAE;AACpC,gBAAQ,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;AACjF,gBAAQ,IAAI,CAAC,mBAAmB,EAAE,CAAC;AACnC,aAAO;AACP,SAAK;AACL,KAAG;AACH,IAEE,oBAAoB,CAAC,KAAqB;AAC5C,QAAI,IAAI,IAAI,CAAC,gBAAgB,KAAK,IAAI,IAAI,IAAI,CAAC,gBAAgB,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;AAC1G,YAAM,OAAO;AACb,SAAK;AACL,QAAI,KAAK,CAAC,cAAc,EAAE,CAAC;AAC3B,QAAI,MAAM,EAAE,aAAa,EAAE,GAAG,KAAK,CAAC;AACpC,QAAI,MAAM,IAAI,GAAG,aAAa,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACtF,QAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,YAAY,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;AACzD,KAAG;AACH,IACU,qBAAqB,CAAC,CAAgB;AAChD,QAAI,CAAC,CAAC,cAAc,EAAE,CAAC;AACvB,KAAG;AACH;oDAnGC,SAAS,SAAC,iFAET,QAAQ,EAAE,8FAA8F,kBACxG,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE;gBAAiB,EAAE,WAAW,EAAE,UAAU,CAAC,MAAM,wBAAwB,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,eAClH;;;;kPACI;AAAC;AAAkD,YAlBtD,UAAU;AACV,YAAA,SAAS;AACT,yCA2BG,SAAS,SAAC,kBAAkB;AAAS,YACF,QAAQ,uBAA3C,MAAM,SAAC,QAAQ;AAAQ;AAAG;AAGb,gCAdf,KAAK;AAAK,8BACV,WAAW,SAAC,sBAAsB,cAAG,KAAK;AAAK,2BAa/C,YAAY,SAAC,OAAO;AAClB,4BAMF,YAAY,SAAC,MAAM;AACjB,mCAyDF,YAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;AAC/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAAE;AAAC;AAAC,MC9FK,qBAAqB;AAAG;iDAJpC,QAAQ,SAAC,kBACR,YAAY,EAAE,CAAC;IAAwB,CAAC,kBACxC,OAAO,EAAE,CAAC,wBAAwB,CAAC,eACpC;;;;;;;;;0BACI;AAAC;ACPN;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AAC8B","sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Renderer2,\n  HostListener,\n  HostBinding,\n  forwardRef,\n  Input,\n  Inject,\n  Attribute,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DOCUMENT } from '@angular/common';\n\n/** @dynamic */\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[contenteditable][formControlName],[contenteditable][formControl],[contenteditable][ngModel]',\n  providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => ContenteditableDirective), multi: true }],\n})\nexport class ContenteditableDirective implements ControlValueAccessor {\n  @Input() propValueAccessor = 'textContent';\n  @HostBinding('attr.contenteditable') @Input() contenteditable = true;\n\n  private onChange: (value: string) => void;\n  private onTouched: () => void;\n  private removeDisabledState: () => void;\n\n  constructor(\n    private elementRef: ElementRef,\n    private renderer: Renderer2,\n    @Attribute('unformattedPaste') private unformattedPaste: string,\n    @Inject(DOCUMENT) private document: Document\n  ) {}\n\n  @HostListener('input')\n  callOnChange() {\n    if (typeof this.onChange == 'function') {\n      this.onChange(this.elementRef.nativeElement[this.propValueAccessor]);\n    }\n  }\n\n  @HostListener('blur')\n  callOnTouched() {\n    if (typeof this.onTouched == 'function') {\n      this.onTouched();\n    }\n  }\n\n  /**\n   * Writes a new value to the element.\n   * This method will be called by the forms API to write\n   * to the view when programmatic (model -> view) changes are requested.\n   *\n   * See: [ControlValueAccessor](https://angular.io/api/forms/ControlValueAccessor#members)\n   */\n  writeValue(value: any): void {\n    const normalizedValue = value == null ? '' : value;\n    this.renderer.setProperty(this.elementRef.nativeElement, this.propValueAccessor, normalizedValue);\n  }\n\n  /**\n   * Registers a callback function that should be called when\n   * the control's value changes in the UI.\n   *\n   * This is called by the forms API on initialization so it can update\n   * the form model when values propagate from the view (view -> model).\n   */\n  registerOnChange(fn: () => void): void {\n    this.onChange = fn;\n  }\n\n  /**\n   * Registers a callback function that should be called when the control receives a blur event.\n   * This is called by the forms API on initialization so it can update the form model on blur.\n   */\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  /**\n   * This function is called by the forms API when the control status changes to or from \"DISABLED\".\n   * Depending on the value, it should enable or disable the appropriate DOM element.\n   */\n  setDisabledState(isDisabled: boolean): void {\n    if (isDisabled) {\n      this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'true');\n      this.removeDisabledState = this.renderer.listen(\n        this.elementRef.nativeElement,\n        'keydown',\n        this.listenerDisabledState\n      );\n    } else {\n      if (this.removeDisabledState) {\n        this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\n        this.removeDisabledState();\n      }\n    }\n  }\n\n  @HostListener('paste', ['$event'])\n  preventFormatedPaste(event: ClipboardEvent) {\n    if (this.unformattedPaste === null || this.unformattedPaste == 'false' || !this.document.execCommand) {\n      return;\n    }\n    event.preventDefault();\n    const { clipboardData } = event;\n    const text = clipboardData.getData('text/plain') || clipboardData.getData('text');\n    this.document.execCommand('insertText', false, text);\n  }\n\n  private listenerDisabledState(e: KeyboardEvent) {\n    e.preventDefault();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ContenteditableDirective } from './contenteditable.directive';\n\n@NgModule({\n  declarations: [ContenteditableDirective],\n  exports: [ContenteditableDirective],\n})\nexport class ContenteditableModule {}\n","/*\n * Public API Surface of contenteditable\n */\n\nexport * from './lib/contenteditable.directive';\nexport * from './lib/contenteditable.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"]}